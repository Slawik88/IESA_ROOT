# IESA - –°–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 1. –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –æ—á–∫–æ–≤ ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `activity_points` –≤ –º–æ–¥–µ–ª—å User
- –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `0005_user_activity_points.py`
- –£–ª—É—á—à–µ–Ω –º–µ—Ç–æ–¥ `get_achievement_level()` —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—á–∫–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- –§–æ—Ä–º—É–ª–∞: –ü–æ—Å—Ç—ã√ó10 + –õ–∞–π–∫–∏√ó2 + –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏√ó1

### 2. IESA_ROOT ‚Üí IESA ‚úÖ
- –ó–∞–º–µ–Ω–µ–Ω–æ –≤–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö (17 —Ñ–∞–π–ª–æ–≤)
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- –ò–∑–º–µ–Ω–µ–Ω footer

### 3. –£–±—Ä–∞–Ω–∞ —á–µ—Ä–Ω–∞—è –ª–∏–Ω–∏—è –Ω–∞ —Å—Å—ã–ª–∫–∞—Ö ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω `border-bottom: none` –≤ style.css
- –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ `a` –∏ `a:hover`

### 4. –ê–¥–º–∏–Ω–∫–∞ –ø–æ—Å—Ç–æ–≤ —É–ª—É—á—à–µ–Ω–∞ ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω ID –≤ list_display
- –ê–≤—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å  
- –†–∞—Å—à–∏—Ä–µ–Ω –ø–æ–∏—Å–∫: ID, –∞–≤—Ç–æ—Ä, email, –∏–º—è, —Ñ–∞–º–∏–ª–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ date_hierarchy
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ engagement

### 5. –õ–∞–π–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚úÖ
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã views –∏ —à–∞–±–ª–æ–Ω—ã
- –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–µ—Ä–µ–∑ HTMX

---

## üîß –¢–†–ï–ë–£–Æ–¢ –î–û–†–ê–ë–û–¢–ö–ò

### 6. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã - —Å–¥–µ–ª–∞—Ç—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏
**–§–∞–π–ª:** `blog/templates/blog/post_detail.html`
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–ª–∏–∫–∞–±–µ–ª–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** –û–±–µ—Ä–Ω—É—Ç—å –≤—Å—é –∫–∞—Ä—Ç–æ—á–∫—É –≤ `<a>` —Å –∫–ª–∞—Å—Å–æ–º hover-lift

```html
<a href="{% url 'post_detail' post_rec.pk %}" class="text-decoration-none">
    <div class="card card-modern hover-lift" style="cursor:pointer;">
        <!-- card content -->
    </div>
</a>
```

**CSS –¥–æ–±–∞–≤–∏—Ç—å:**
```css
.hover-lift {
    transition: transform 0.2s, box-shadow 0.2s;
}
.hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}
```

---

### 7. –°–æ–±—ã—Ç–∏—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
**–§–∞–π–ª:** `core/views.py` –∏ `core/templates/core/index.html`

**–í views.py –¥–æ–±–∞–≤–∏—Ç—å:**
```python
from blog.models import Event
from django.utils import timezone

def index(request):
    # Upcoming events (next 3)
    upcoming_events = Event.objects.filter(
        date__gte=timezone.now()
    ).order_by('date')[:3]
    
    context = {
        'upcoming_events': upcoming_events,
        # ... other context
    }
    return render(request, 'core/index.html', context)
```

**–í index.html –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é:**
```html
{% if upcoming_events %}
<section class="mb-5">
    <h2 class="section-title mb-4">
        <i class="fas fa-calendar-alt me-2"></i>Upcoming Events
    </h2>
    <div class="row g-3">
        {% for event in upcoming_events %}
        <div class="col-md-4">
            <a href="{% url 'event_detail' event.pk %}" class="text-decoration-none">
                <div class="card card-modern hover-lift h-100">
                    {% if event.image %}
                    <img src="{{ event.image.url }}" class="card-img-top" style="height:180px;object-fit:cover;">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ event.title }}</h5>
                        <p class="text-muted small">
                            <i class="fas fa-calendar"></i> {{ event.date|date:"d M Y" }}<br>
                            <i class="fas fa-map-marker-alt"></i> {{ event.location|default:"TBA" }}
                        </p>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    <div class="text-center mt-3">
        <a href="{% url 'event_list' %}" class="btn btn-outline-primary">View All Events ‚Üí</a>
    </div>
</section>
{% endif %}
```

---

### 8. –ü–æ–∏—Å–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Community
**–§–∞–π–ª:** `blog/templates/blog/post_list.html`
**–ü—Ä–æ–±–ª–µ–º–∞:** HTMX –ø–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –ï—Å—Ç—å –ª–∏ —Ñ–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞?
2. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ URL –≤ hx-get?
3. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ view –¥–ª—è –ø–æ–∏—Å–∫–∞?

**–î–æ–±–∞–≤–∏—Ç—å –≤ views.py:**
```python
def post_search(request):
    query = request.GET.get('q', '')
    status_filter = request.GET.get('status', 'all')
    
    posts = Post.objects.filter(status='published').select_related('author')
    
    if query:
        posts = posts.filter(
            Q(title__icontains=query) | 
            Q(text__icontains=query) |
            Q(author__username__icontains=query)
        ).distinct()
    
    context = {'posts': posts, 'query': query}
    
    if request.headers.get('HX-Request'):
        return render(request, 'blog/htmx/post_search_results.html', context)
    return render(request, 'blog/post_list.html', context)
```

**–í urls.py:**
```python
path('search/', views.post_search, name='post_search'),
```

---

### 9. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ –∏ –ø—Ä–µ–≤—å—é
**–§–∞–π–ª:** `blog/views.py` - `post_create`
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–µ–≤—å—é

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º—É:**
```python
from django import forms
from .models import Post

class PostForm(forms.ModelForm):
    class Meta:
        model = Post
        fields = ['title', 'text', 'preview_image']
        widgets = {
            'text': CKEditor5Widget(config_name='extends'),
        }
```

**View:**
```python
@login_required
def post_create(request):
    if request.method == 'POST':
        form = PostForm(request.POST, request.FILES)
        if form.is_valid():
            post = form.save(commit=False)
            post.author = request.user
            post.status = 'pending'  # Moderation
            post.save()
            messages.success(request, 'Post created successfully!')
            return redirect('post_detail', pk=post.pk)
    else:
        form = PostForm()
    
    return render(request, 'blog/post_create.html', {'form': form})
```

---

### 10. QR –∫–æ–¥—ã - –ø—Ä–æ–≤–µ—Ä–∫–∞
**–§–∞–π–ª—ã:** `users/qr_utils.py`, `users/views.py`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ª–∏ —Ñ–∞–π–ª—ã –≤ `/media/cards/`?
2. URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π? –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π
3. View `qr_image` —Ä–∞–±–æ—Ç–∞–µ—Ç?

**–¢–µ—Å—Ç:**
```python
# –í manage.py shell
from users.models import User
user = User.objects.first()
print(user.permanent_id)
print(f"/auth/card/{user.permanent_id}/")
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –ø–∞—Ç—Ç–µ—Ä–Ω –≤ users/urls.py:**
```python
path('qr/<uuid:permanent_id>/', views.qr_image, name='user_qr'),
```

---

### 11. –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
**–î–æ–±–∞–≤–∏—Ç—å –≤ post_list.html:**

```html
<div class="filter-bar mb-4">
    <form hx-get="{% url 'post_search' %}" 
          hx-target="#posts-container" 
          hx-trigger="change, submit">
        <div class="row g-2">
            <div class="col-md-6">
                <input type="text" name="q" class="form-control" 
                       placeholder="üîç Search posts..." 
                       value="{{ query }}">
            </div>
            <div class="col-md-3">
                <select name="author" class="form-select">
                    <option value="">All Authors</option>
                    {% for author in authors %}
                    <option value="{{ author.id }}">{{ author.username }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-3">
                <select name="sort" class="form-select">
                    <option value="-created_at">Newest First</option>
                    <option value="created_at">Oldest First</option>
                    <option value="-views_count">Most Viewed</option>
                    <option value="title">A-Z</option>
                </select>
            </div>
        </div>
    </form>
</div>
```

---

### 12. –§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å–æ–±—ã—Ç–∏–π
**–î–æ–±–∞–≤–∏—Ç—å –≤ event_list.html:**

```html
<div class="filter-bar mb-4">
    <div class="btn-group" role="group">
        <input type="radio" class="btn-check" name="event-filter" id="upcoming" checked>
        <label class="btn btn-outline-primary" for="upcoming" 
               hx-get="{% url 'event_list' %}?filter=upcoming"
               hx-target="#events-container">
            üîú Upcoming
        </label>
        
        <input type="radio" class="btn-check" name="event-filter" id="past">
        <label class="btn btn-outline-primary" for="past"
               hx-get="{% url 'event_list' %}?filter=past"
               hx-target="#events-container">
            üìÖ Past Events
        </label>
        
        <input type="radio" class="btn-check" name="event-filter" id="all-events">
        <label class="btn btn-outline-primary" for="all-events"
               hx-get="{% url 'event_list' %}?filter=all"
               hx-target="#events-container">
            üìã All Events
        </label>
    </div>
</div>
```

**–í views.py:**
```python
def event_list(request):
    event_filter = request.GET.get('filter', 'upcoming')
    now = timezone.now()
    
    if event_filter == 'upcoming':
        events = Event.objects.filter(date__gte=now).order_by('date')
    elif event_filter == 'past':
        events = Event.objects.filter(date__lt=now).order_by('-date')
    else:
        events = Event.objects.all().order_by('-date')
    
    context = {'events': events, 'filter': event_filter}
    return render(request, 'blog/event_list.html', context)
```

---

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations
python manage.py migrate

# 2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
python manage.py shell
>>> from users.models import User
>>> for user in User.objects.all():
...     user.update_statistics()

# 3. –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
python manage.py collectstatic --noinput

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è production
- HTMX —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSRF —Ç–æ–∫–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ö
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö —ç–∫—Ä–∞–Ω–∞
